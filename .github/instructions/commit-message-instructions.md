# Commit Message Instructions

## 基本ルール

- コミットメッセージは必ず日本語で記述してください。
- コミットメッセージは「Conventional Commit」フォーマットに従ってください。
- コミットメッセージは、70文字以内の短い説明、その後に空行、続けて詳細な説明を記載してください。
- 短い説明は次の形式で記載します： `<type>(<scope>): <icon> <短い説明>`
  - `type`：変更の種類（英語で記載）
  - `scope`：変更対象の範囲（省略可能）。特定のコンポーネント、ファイル、モジュールなど
  - `icon`：変更内容を視覚的に表す絵文字
  - `短い説明`：変更内容を簡潔にまとめた日本語の説明

## Type一覧

変更の種類と対応する絵文字：
## Type一覧

変更の種類と対応する絵文字：

### 主要な変更タイプ

| Type | Icon | 説明 | 使用例 |
|------|------|------|--------|
| `feat` | ✨ | 新機能の追加 | 新しいAPI、機能、コンポーネントの追加 |
| `fix` | 🐛 | バグ修正 | 不具合、エラーの修正 |
| `docs` | 📝 | ドキュメントのみの変更 | README、コメント、ドキュメントファイルの更新 |
| `style` | 💄 | コードの意味に影響しない変更 | フォーマット、空白、セミコロンなど |
| `refactor` | ♻️ | バグ修正や機能追加を伴わないリファクタリング | コード構造の改善、最適化 |
| `perf` | ⚡ | パフォーマンス改善 | 速度向上、メモリ使用量削減 |
| `test` | ✅ | テストの追加や修正 | ユニットテスト、E2Eテストの追加・更新 |
| `chore` | 🔧 | ビルドプロセスや補助ツールの変更 | タスクランナー、パッケージマネージャー設定 |

### CI/CD・ビルド関連

| Type | Icon | 説明 | 使用例 |
|------|------|------|--------|
| `ci` | 👷 | CI設定ファイルやスクリプトの変更 | GitHub Actions、CircleCI設定 |
| `build` | 🏗️ | ビルドシステムや外部依存関係への変更 | webpack、rollup、ビルドスクリプト |

### 依存関係

| Type | Icon | 説明 | 使用例 |
|------|------|------|--------|
| `deps` | 📦 | 依存関係の追加・更新 | package.jsonの依存関係更新 |
| `deps-dev` | 📦 | 開発用依存関係の更新 | 開発ツール、テストライブラリの更新 |

### コンテンツ・UI関連

| Type | Icon | 説明 | 使用例 |
|------|------|------|--------|
| `ui` | 🎨 | UIコンポーネント・デザインの変更 | ボタン、レイアウト、スタイルの変更 |
| `ux` | 💫 | ユーザー体験の改善 | 操作性向上、フロー改善 |
| `a11y` | ♿ | アクセシビリティ改善 | ARIA属性、キーボード操作対応 |
| `i18n` | 🌐 | 国際化・ローカライズ | 翻訳、多言語対応 |

### プロジェクト管理

| Type | Icon | 説明 | 使用例 |
|------|------|------|--------|
| `init` | 🎉 | 初回コミット | プロジェクト開始時 |
| `config` | ⚙️ | 設定ファイルの変更 | .env、config.json、設定ファイル |
| `security` | 🔒 | セキュリティ関連の変更 | 脆弱性修正、認証・認可の改善 |

### その他

| Type | Icon | 説明 | 使用例 |
|------|------|------|--------|
| `revert` | ⏪ | 以前のコミットの取り消し | 問題のあるコミットの巻き戻し |
| `wip` | 🚧 | 作業中（コミット非推奨） | 未完成の変更を一時保存 |
| `hotfix` | 🚑 | 緊急修正 | 本番環境の重大な問題の即座の修正 |
| `merge` | 🔀 | ブランチのマージ | feature、developブランチのマージ |

### ファイル操作

| Type | Icon | 説明 | 使用例 |
|------|------|------|--------|
| `rename` | 🚚 | ファイルやディレクトリ名の変更 | リネーム、移動 |
| `remove` | 🔥 | ファイルや機能の削除 | 不要なコード、ファイルの削除 |
| `cleanup` | 🧹 | コードの整理・クリーンアップ | デッドコード削除、整理 |

### 特殊用途

| Type | Icon | 説明 | 使用例 |
|------|------|------|--------|
| `experiment` | 🧪 | 実験的な変更 | 新技術の試行、プロトタイプ |
| `analytics` | 📈 | 分析やトラッキングコードの追加 | Google Analytics、イベントトラッキング |
| `seo` | 🔍 | SEO改善 | メタタグ、構造化データ |
| `legal` | ⚖️ | ライセンスや法的変更 | LICENSE、利用規約の変更 |

## 詳細説明の記載内容
## 詳細説明の記載内容

詳細説明には以下の情報を含めてください：

- **なぜこの変更を行ったのか**（背景、動機、解決する問題）
- **どのような方法で実装したのか**（使用した技術、アプローチ）
- **影響範囲**（この変更が影響する部分、注意点）
- **将来の理解のために有用な情報**（設計上の決定、トレードオフ）
- **関連する Issue や PR**（最後に記載）

## 特殊な記法

### Issue のクローズ

コミットが Issue を解決する場合は、詳細説明の末尾に以下を記載：

```
Fixes #123
Closes #456
Resolves #789
```

### 破壊的変更（Breaking Change）

既存の API や動作に互換性のない変更がある場合は、詳細説明の末尾に記載：

```
BREAKING CHANGE: 既存のAPI呼び出しは新しいエンドポイントURLに合わせて修正が必要です。
```

### 共同作成者（Co-authored-by）

ペアプログラミングや複数人での作業時は、詳細説明の末尾に記載：

```
Co-authored-by: Name <name@example.com>
Co-authored-by: Another Name <another@example.com>
```

## Scope の使い方

`scope` は省略可能ですが、変更が特定の範囲に限定される場合は記載することを推奨します。

### Scope の例

- **コンポーネント名**: `feat(button): ✨ プライマリボタンのホバー効果を追加`
- **機能名**: `fix(auth): 🐛 トークンの有効期限チェックを修正`
- **ファイル名**: `docs(readme): 📝 インストール手順を更新`
- **モジュール名**: `refactor(api): ♻️ エラーハンドリングを統一`
- **パッケージ名**: `deps(react): 📦 React を 18.3.0 に更新`

複数の範囲にまたがる場合は scope を省略するか、最も影響の大きい範囲を記載します。

## コミットメッセージの例

## コミットメッセージの例

### 例1: 新機能の追加

```txt
feat(auth): ✨ ユーザー認証機能の追加

JWTを用いたユーザー認証機能を追加しました。
ログイン、登録、トークン検証のエンドポイントを実装しています。

実装内容:
- JWTベースの認証を実装
- ログイン・登録エンドポイントの追加
- トークン検証用ミドルウェアの追加
- セッション管理機能の実装

技術的な選択:
- トークンの有効期限は24時間に設定
- リフレッシュトークン機能は次のイテレーションで実装予定

Fixes #123
```

### 例2: バグ修正

```txt
fix(api): 🐛 ユーザー一覧取得時のページネーション不具合を修正

ページネーションのオフセット計算が誤っていたため、
2ページ目以降で正しくデータが取得できない問題を修正しました。

修正内容:
- オフセット計算式を (page - 1) * limit に修正
- 総ページ数の計算ロジックを改善
- エッジケースのテストを追加

Closes #456
```

### 例3: ドキュメント更新

```txt
docs(readme): 📝 セットアップ手順とトラブルシューティングを追加

初めてプロジェクトをセットアップするユーザー向けに、
より詳細な手順とよくある問題の解決方法を追記しました。

追加内容:
- Node.js バージョン要件の明記
- 環境変数の設定例
- よくあるエラーとその解決方法
- Docker を使った開発環境のセットアップ手順
```

### 例4: リファクタリング

```txt
refactor(utils): ♻️ 日付処理ユーティリティを整理

複数箇所に散らばっていた日付処理ロジックを
utils/date.ts に集約し、テストカバレッジを向上させました。

変更内容:
- 重複していた日付フォーマット関数を統一
- タイムゾーン処理を一元化
- 型定義を追加してより安全に
- ユニットテストを追加（カバレッジ 95%）

パフォーマンス: 変更なし
互換性: 既存の呼び出し元は影響なし
```

### 例5: 依存関係の更新

```txt
deps: 📦 セキュリティアップデートを適用

脆弱性が報告されているパッケージを最新バージョンに更新しました。

更新内容:
- axios: 0.27.2 → 1.6.0 (CVE-2023-45857)
- express: 4.17.1 → 4.18.2 (CVE-2022-24999)
- jsonwebtoken: 8.5.1 → 9.0.2 (CVE-2022-23529)

動作確認:
- 全テストが通過
- 既存機能に影響なし
```

### 例6: テストの追加

```txt
test(auth): ✅ 認証関連のE2Eテストを追加

認証フローの主要なシナリオをカバーするE2Eテストを追加しました。

追加したテストケース:
- 正常なログイン・ログアウトフロー
- 無効な認証情報でのログイン失敗
- トークン期限切れ時の再認証
- パスワードリセットフロー

テスト環境: Playwright を使用
実行時間: 約30秒
```

### 例7: 破壊的変更

```txt
refactor(api): ♻️ APIエンドポイントをRESTfulな設計に変更

APIエンドポイントをRESTfulな設計に変更しました。
この変更により、既存のAPI呼び出し全てに影響があります。

変更内容:
- エンドポイントURLをRESTfulな形式に変更
  - GET /api/getUser/:id → GET /api/users/:id
  - POST /api/createUser → POST /api/users
  - PUT /api/updateUser/:id → PUT /api/users/:id
- リクエスト・レスポンス形式の統一
- エラーレスポンスの標準化

移行ガイド: docs/migration-v2.md を参照

BREAKING CHANGE: 既存のAPI呼び出しは新しいエンドポイントURLに合わせて修正が必要です。
各エンドポイントの対応表は docs/api-migration.md を参照してください。
```

### 例8: ペアプログラミング

```txt
feat(chat): ✨ リアルタイムチャット機能を実装

WebSocketを使用したリアルタイムチャット機能を実装しました。

実装内容:
- Socket.io を使用したリアルタイム通信
- メッセージの永続化（MongoDB）
- オンライン状態の表示
- 未読カウント機能

今後の改善:
- メッセージの既読機能
- ファイル添付機能
- グループチャット対応

Co-authored-by: Taro Yamada <taro@example.com>
Co-authored-by: Hanako Sato <hanako@example.com>
```

## ベストプラクティス

### DO（推奨）

✅ 変更の本質を簡潔に表現する
✅ 動詞は現在形または命令形を使用（「追加」「修正」「更新」）
✅ 詳細説明で「なぜ」を説明する
✅ 関連する Issue 番号を記載する
✅ 1つのコミットで1つの論理的な変更を行う
✅ テストを含める

### DON'T（非推奨）

❌ 「いろいろ修正」「WIP」などの曖昧な説明
❌ 複数の無関係な変更を1つのコミットにまとめる
❌ コミットメッセージなしでコミット
❌ 「。」や「！」などの句読点を短い説明に含める（詳細説明はOK）
❌ 過去形の使用（「追加した」→「追加」）

## チェックリスト

コミット前に以下を確認してください：

- [ ] type が適切に選択されているか
- [ ] scope が記載されているか（該当する場合）
- [ ] 短い説明が70文字以内か
- [ ] 詳細説明で変更の理由が説明されているか
- [ ] 関連する Issue 番号が記載されているか（該当する場合）
- [ ] 破壊的変更がある場合、BREAKING CHANGE が記載されているか
- [ ] テストが追加/更新されているか（該当する場合）
